# 18

# Zapier 的实用程序函数

到目前为止，我们已经讨论如何使用内置应用程序 Formatter by Zapier 执行各种操作，以转换日期、时间、数字和文本。还有一些有用的转换函数我们还没有探索过，这些函数以 **Utilities（实用程序）** 为分类。本章将通过介绍 **Utilities** 事件的功能来结束我们对内置应用程序 Formatter by Zapier 功能的探索。

首先，我们将概述 Formatter by Zapier **Utilities** 事件和可用的转换函数。然后，我们将探讨如何从 CSV 文件中导入数据并在我们的 Zaps 中使用它们，如何使用查找表存储并帮助我们找到相关数据，以及如何根据其在列表中的位置选择值列表中的数据。最后，我们将介绍行项目并探索与在自动化中使用行项目相关的各种转换函数。这包括将文本转换为行项目以及反之亦然，以及行项目的创建和定制。

本章我们将涵盖以下关键主题：

+   简介内置应用程序 Formatter by Zapier 的 Utilities 事件

+   从 CSV 文件导入数据

+   使用查找表查找相关数据

+   从列表中选择数据

+   操作行项目

当您完成了每个主题的学习后，您将更好地理解可以与内置应用程序 Formatter by Zapier 一起使用的各种 **Utilities** 转换函数。您将知道如何使用 Zapier 从 CSV 文件导入数据，使用查找表，从列表中选择数据以及处理行项目。

# 技术要求

要充分利用本章内容，您需要使用 Zapier 帐户。您需要 Zapier Starter 计划来使用内置应用程序 Formatter by Zapier 创建多步骤工作流程。

# 简介内置应用程序 Formatter by Zapier 的 Utilities 事件

我们已经发现，Formatter by Zapier 可以轻松地用于将各种值从一种格式转换为另一种格式。我们已经探讨了如何将日期、时间、数字和文本转换为不同的格式。您可能希望上传 CSV 文件中的数据以在您的自动化中使用，查找相关数据（例如用户 ID 与用户的电子邮件地址关联），在列表中选择特定位置（例如第一或最后一个）的值，或者您可能需要处理行项目数据，这在发票和电子商务应用程序中经常使用。为考虑到这些要求，Zapier 在内置应用程序 Formatter by Zapier 中创建了这些函数的一个分组，并通过使用 **Utilities** 事件提供。

在使用此事件时，您可以使用以下 **Utilities** 转换选项。这些选项可以在您的操作步骤的 **操作** 部分中找到，在 **Transform** 下拉菜单中列出：

+   **导入 CSV 文件**

+   **行项目化程序（创建/附加/前置）**

+   **行项目** **到文本**

+   **查找表**

+   **从列表中选择**

+   **文本** **到行项目**

我们将逐个审查这些功能。

提示

您可以使用魔术 AI 要求 Zapier 在 Zap 步骤中格式化数据，然后创建具有相关转换选项的 Formatter by Zapier 步骤。我们将在*第十九章*，*AI* *and Automation*中讨论这一点。

让我们从探讨如何使用**Import CSV File** 转换选项导入 CSV 文件开始。

# 从 CSV 文件中导入数据

能够自动从电子表格文件中提取数据以便在 Zap 中使用会很方便，对吧？嗯，Zapier 允许您这样做。例如，您可能会通过电子邮件收到一份 CSV 文件，其中包含当天交易的摘要，您希望将这些数据直接提取到您的会计软件中。Zapier 可通过使用具有**Import CSV File** 转换功能的 Formatter by Zapier **Utilities** 操作事件来帮助您从 CSV 文件中提取数据，并将其以文本字符串和行项目的形式呈现。

以下是您可以使用此转换选项的一些示例：

+   您可能使用 Excel 电子表格记录销售的详细信息和相关的引导至销售转化时间。每天下午 5 点，CRM 会通过电子邮件将此的 CSV 副本转发给您；通常情况下，您需要提取所需的数据并手动与您的团队分享。您可以使用**Import CSV File** 转换功能从 CSV 文件中提取数据，并将当天数据的最重要部分转发到您的 Slack 频道，供销售团队查看。

+   您可能可以访问报告文件（通过公开访问的 URL），该文件允许您以 CSV 形式下载数据。该报告文件提供有关您从收银系统中的每日销售交易的信息。该文件在午夜时分清除所有数据并刷新。使用**Import CSV File** 转换功能，您可以提取 CSV 中的数据，并在您的会计系统中每天自动生成发票（使用 Schedule by Zapier 触发器）。

在*第三章*中，*Building Your First Automated Workflow (Zap)*，我们介绍并讨论了文件字段类型。这些字段类型所对应的原则和其所接受的内容同样适用于`.``txt`文件。

接下来，让我们讨论如何设置具有**Import CSV File** 转换选项的操作步骤。

## 设置使用 Import CSV File 转换选项的实用程序操作事件

为了说明如何使用每个**Import CSV File** 转换函数，我们将以收到一份包含当天销售额的 CSV 文件的电子邮件为例。以下屏幕截图显示了一个包含数据的 CSV 文件的示例：

![图 18.1 – 将用于说明使用 Import CSV File 转换函数的 CSV 文件中的数据](img/B18474_18_01.jpg)

图 18.1 – 将用于说明使用 Import CSV File 转换函数的 CSV 文件中的数据

一旦设置了触发步骤，您就可以使用**实用工具**操作事件。

添加了操作步骤后，无论是选择**操作**步骤还是单击**+**图标，并选择了**Formatter by Zapier**作为应用程序和**实用工具**作为操作事件，您都可以编辑**操作**部分中的字段，如下所示：

+   **转换**：从下拉菜单中选择**导入 CSV 文件**选项。这是一个必填字段，必须为 Zap 设置一个值才能运行。

+   **CSV 文件**：您可以使用此字段将要从中提取数据的 CSV 文件进行映射。这是一个**文件**字段类型，将需要从先前步骤中映射到此字段的 URL 或实际文件对象。您可以输入来自先前步骤的动态值以指定要使用的文件。在我们的示例中，我们将使用电子邮件触发步骤的附件值。这是一个必填字段，必须为 Zap 设置一个值才能运行。

+   **强制首行作为标题行**：您可以使用此下拉布尔字段来选择**是**或**否**，以确定是否要强制格式化程序将第一行识别为标题行。默认情况下，它将尝试确定是否存在标题行。在测试时，如果未检测到标题行，您可以通过选择**是**选项来强制执行。

+   **CSV 文件类型**：您可以使用此下拉字段选择 CSV 文件的类型。选项包括**自动检测**、**逗号分隔**、**分号分隔**、**Excel 逗号分隔**、**Excel 制表符分隔**、**单列**和**文本文件（不解析 csv）**。默认情况下，Formatter 将尝试检测文件类型。在测试时，如果未检测到文件类型，您可以通过选择相应的文件选项来强制执行。您还可以将此字段与先前步骤中的已知文件类型的动态数据进行映射。

+   **CSV 文件编码**：您可以使用此下拉字段选择编码类型。选项包括**UTF-8**、**Latin-1**和**UTF-16**。默认情况下，Formatter 将假定文件为 UTF-8 编码。如果在测试操作步骤时出现错误，您可以通过选择相关选项来指定编码类型。您可以使用**自定义**选项添加其他编码选项。支持的选项可以在此引用中找到：[`docs.python.org/3/library/codecs.html#standard-encodings`](https://docs.python.org/3/library/codecs.html#standard-encodings)。

数据导入限制为约 150 KB，相当于大约 1,000 行，这可能会对某些用户造成一些限制。

以下是示例屏幕截图：

![图 18.2 - 使用 Formatter by Zapier 实用工具操作事件从 CSV 文件导入数据的概述](img/B18474_18_02.jpg)

图 18.2 - 使用 Formatter by Zapier 实用工具操作事件从 CSV 文件导入数据的概述

点击 **继续** 按钮。然后，你可以使用 **测试** 部分测试这一步骤，以从 CSV 文件中提取数据。*图 18**.2* 中的情景结果显示在以下截图中：

![图 18.3 - 使用 Utilities 操作事件导入 CSV 文件时提取数据的概览](img/B18474_18_03.jpg)

图 18.3 - 使用 Utilities 操作事件导入 CSV 文件时提取数据的概览

继续在你的 `csv_text` 输出或 `line_items` 输出（专门用于支持行项目的应用程序）或两者之间添加一个或多个操作步骤。我们将在 *操纵行项目* *部分* 中更详细地讨论行项目。

重要提示

当测试你的操作步骤时，请记住你只会看到 CSV 文件的有限行数（通常为 50 行）。但是，当你的 Zap 实时运行时，文件中的所有数据都将被处理。

你现在应该更好地了解如何使用**导入 CSV 文件**转换功能导入 CSV 文件了。

接下来，让我们探讨如何使用查找表存储和帮助我们使用**查找表**转换功能查找相关数据。

# 使用查找表查找相关数据

你与 Zapier 一起工作，连接你的应用程序并自动化你的流程，你会发现你各种应用程序中常用的关键值以不同的方式表示。例如，如果你销售在线课程，通过你的购物车传递数据，`VLOOKUP` 函数。请记住要考虑的主要区别是，在 Microsoft Excel 中，此函数不区分大小写，而在 Zapier 中，它是区分大小写的。

这里有几个可以使用此转换选项的示例：

+   假设当你的 CRM 中的交易或机会达到管道中的某个特定阶段时，你希望在你的任务管理应用中为交易所有者分配一张卡片。在这种情况下，你的用户在 CRM 中的标识符与你的任务管理应用中的标识符不同。例如，你的销售经理 John，在 Pipedrive 中可能被识别为 `John Smith`，而在 Trello 中可能被识别为 `J A Smith`。大多数系统中用户也通过唯一 ID 进行标识，所以在这种情况下，John 在 Pipedrive 中有一个用户 ID 是 `125869`，在 Trello 中有一个用户 ID 是 `51f8a8cd179ff019a67e95312`。我们可以使用 Formatter by Zapier 中的 Utilities 操作事件中的查找表列出所有我们可能需要此数据的 Pipedrive 用户名和用户的 Trello 用户 ID。然后，我们将使用 Pipedrive 中的用户名作为搜索键来返回 Trello 用户的用户 ID。

+   您可能会使用诸如**Acuity Scheduling**之类的预约和预约应用，并且需要将销售数据传递给您的会计应用程序 QuickBooks Online。由于两个系统中产品的名称和 ID 不同，您可以使用 Formatter by Zapier **Utilities** 操作事件中的查找表记录您需要的搜索数据。您可以将 **Acuity Scheduling** 产品名称记录为搜索键，并将 QuickBooks Online 产品 ID 记录为要返回的值。

接下来，让我们回顾一下如何设置一个具有**查找表**转换选项的操作步骤。

## 使用查找表转换选项设置实用程序操作事件

一旦设置了触发步骤，您就可以使用**Utilities**操作事件。

一旦您添加了一个操作步骤，通过选择**操作**步骤或单击**+**图标，并选择了**Formatter by Zapier**作为应用程序，并将**Utilities**作为操作事件，您可以编辑**操作**部分中的字段，如下所示：

+   **转换**：从下拉菜单中选择**查找表**选项。这是一个必填字段，必须为 Zap 提供一个值才能运行。

+   **查找键**：您可以使用此字段将要在查找表中搜索的数据的搜索键值映射到。您可以输入静态值、前一步骤的动态值或两者的组合来指定此值。此字段支持行项目，这意味着如果将前一步骤的动态数据映射到此字段，并且数据以行项目数组的形式存在，则查找的结果将产生多个值，每个行项目数组键对应一个值。虽然这不是一个必填字段，但如果没有值，格式化函数将不会返回结果。

+   **查找表**：此表由两列组成。在左列中，您可以输入要用作搜索参考的数据。这是 Zapier 将用来与**查找键**中的搜索值匹配的数据，例如用户名。此列仅接受输入静态文本。它也区分大小写，并且只会与**查找键**值进行完全匹配。在右列中，您可以输入要从搜索中返回的数据，例如对应的用户 ID。您可以输入静态值、前一步骤的动态值或两者的组合来指定此列中的值。

+   **回退值**：在这里，如果**查找键**值与左列中的任何搜索参考数据都不匹配，您可以输入要使用的默认值。如果**查找键**值为空，则这尤其有用。

下面的截图显示了一个示例：

![图 18.4 – 使用 Formatter by Zapier Utilities 操作事件在查找表中查找相关数据的概览](img/B18474_18_04.jpg)

图 18.4 – 使用 Formatter by Zapier Utilities 操作事件在查找表中查找相关数据的概览

点击 **Continue** 按钮。然后你可以使用 **Test** 部分在查找表中找到参考数据。*图 18**.4* 中的场景结果如下截图所示：

![图 18.5 - 使用 Utilities 操作事件时从查找表检索匹配数据的概述](img/B18474_18_05.jpg)

图 18.5 - 使用 Utilities 操作事件时从查找表检索匹配数据的概述

在 **Utilities** 操作步骤之后添加一个或多个操作步骤。

提示

虽然**Lookup Key**只有一个字段，但如果你的搜索键是按行项目格式排列的，你可以从**Lookup Table**检索和查找多个值。你也可以在一个 Zap 中使用这个函数进行多个步骤。如果你需要使用各种搜索条件来查找相关数据，这是理想的。

现在你应该更好地理解了何时以及如何使用 **Lookup Table** 转换函数来使用查找表。

接下来，让我们讨论如何使用**Pick from List**转换函数从值列表中选择数据。

# 从列表中选择数据

你是否曾想过要运行一次测验或为参与者分配一个随机结果？或者你可能需要根据优先级给团队成员分配支持查询。你可以很容易地通过使用 Formatter by Zapier **Utilities** 操作事件与 **Pick from List** 转换函数来根据位置从列表中选择一个值来实现这一点。

这里有几个例子可以使用这个转换选项：

+   你可以创建一个单一问题的有趣问答，通过社交媒体推送给你的观众，并将流量引导到你的网站。你可以要求他们在 Google Forms 中完成一个问题，比如“你的出生月份是什么？”然后根据他们的答案随机分配给他们一个“内在神秘生物”。你可以从“内在神秘生物”值列表中随机选择一个结果，比如`独角兽`，`龙`，`凤凰`，`海妖`和`飞马`，然后在你的网站页面上显示结果。

+   你可能有一个团队成员列表，你要分配帮助台请求给他们。你可以通过从列表中随机选择他们的名字来分配团队的请求。或者，你可能想根据优先级将请求分配给特定的用户。例如，吉姆（客户服务助理）被分配了级别`0`的请求，珍妮（主管）被分配了级别`1`的请求，琼（经理）被分配了所有级别`2`的评分。你可以创建一个按顺序排列的列表，包括吉姆、珍妮和琼，以选择将请求路由到哪个人。

让我们回顾一下如何使用 **Pick from List** 转换选项设置操作步骤。

## 使用 Pick from List 转换选项设置 Utilities 操作事件

一旦设置了触发步骤，你就可以使用 **Utilities** 操作事件。

一旦您添加了一个操作步骤，通过选择**操作**步骤或点击**+**图标，并选择**Formatter by Zapier**作为应用程序和**Utilities**作为操作事件，您可以编辑**操作**部分的字段，如下所示：

+   **转换**：从下拉菜单中选择**从列表中选择**选项。这是一个必填字段，Zap 运行时必须有一个值。

+   `0`，第二个将是`1`，第三个将是`2`，依此类推。您还可以使用负数来从列表末尾进行选择，比如 `-1` 表示最后一个，`-2` 表示倒数第二个，以此类推。这是一个必填字段，Zap 运行时必须有一个值。

+   **输入**：您可以使用此字段映射您想要返回的数据的值。当您在一个字段行中输入一个值时，另一个值会出现在其下方。按您想要设置的顺序添加这些值。您可以通过单击行末的**X**按钮来移除行。您可以输入静态值、来自前面步骤的动态值或两者组合以指定此值。尽管这不是一个必填字段，但如果没有值，格式化函数将不会返回结果。

+   **默认**：在这里，您可以输入一个默认值，以在**操作**值不匹配**输入**部分的任何位置时使用。

以下截图显示了一个示例：

![图 18.6 – 使用 Formatter by Zapier Utilities 动作事件概述从列表中选择值](img/B18474_18_06.jpg)

图 18.6 – 使用 Formatter by Zapier Utilities 动作事件概述从列表中选择值

单击**继续**按钮。然后，您可以使用**测试**部分从列表中选择一个值。*图 18*中的情景结果显示在以下截图中：

![图 18.7 – 从列表中选择时返回的数据概述](img/B18474_18_07.jpg)

图 18.7 – 从列表中选择时返回的数据概述

在您的**Utilities**动作步骤之后继续添加一个或多个操作步骤。

现在你应该更好地理解何时以及如何使用**从列表中选择**转换函数了。

接下来，让我们来介绍如何在或转换数据为行项目格式中操作数据。

# 操纵行项目

**线项目**是具有多个项目关联并在 Zapier 中的一个特殊字段中使用的数据块。它们本质上是包含常被称为**对象数组**的对象。线项目数据的使用在电子商务、支付处理和会计应用程序中非常常见，例如 Shopify、PayPal 和 Xero，其中常常在订单或发票中有多行数据，比如纸质收据上的逐项列出的行。例如，在一个订单中，客户可能购买了一个初始产品，比如两件定价为 $9.99 的中号 T 恤，以及第二个产品，比如一个定价为 $10.99 的大号 T 恤。他们还可能支付了 $7.50 的运费，并且应用了 $5.00 的整个订单折扣券。每个个性化项目的详细信息包括产品名称、描述、数量和价格，这些详细信息通常显示为发票上的一行。你还可以将每一行视为电子表格中的一行，其中详细信息显示在列中。因此，一个发票可以由具有与该行相关的特定详细信息的多个行组成。

本节内容对于处理财务交易的会计或会计角色以及涉及运输和物流的运营角色的用户可能最有用。

## 理解线项目

当你在你的 Zaps 的动作步骤中将数据映射到你的字段时，通常会有一个文本数据，可以单独表示，也可以表示为一串文本。线项目在某种意义上是复杂的，因为它们通常包含多个数据位聚合在一起，而且有多个线项目会进一步复杂化事情。可以想象，当数据聚集成线项目或多个线项目存在于一个你想要转移到另一个应用程序的应用程序中时，能够使用线项目自动化将节省大量时间，这样你就不需要手动输入所有这些详细信息了。

你可以快速识别被呈现为行项目的数据，如下面的屏幕截图所示：

![图 18.8 – ﻿线项目数据如何显示为行](img/B18474_18_08.jpg)

图 18.8 – 线项目数据如何以行显示的概述

数据还标记有**线项目**，如下面的屏幕截图所示：

![图 18.9 – ﻿线项目数据如何标记](img/B18474_18_09.jpg)

图 18.9 – 线项目数据标签概述

有一些与 Zapier 集成的应用程序提供**线项目支持**。以下是一些示例：

+   **会计应用程序**：QuickBooks Online、Xero

+   **CRM 应用程序**：Keap

+   **电子商务应用程序**：ShipStation、Shopify、WooCommerce

+   **发票应用程序**：Harvest、Wave、Zoho Invoice

+   **支付处理应用程序**：Chargify、PayPal

+   **其他应用程序**：Google Sheets

+   **Zapier 内置应用程序**：Formatter by Zapier

Zapier 的许多 Formatter 动作事件和转换函数支持使用行项目，以便您可以在一个操作中使用行项目数据操作多行文本、数字、日期和时间。

当然，如果你在传输数据时的应用程序都支持行项目，那么它就会更简单，但是因为只有少数应用程序支持行项目，因此通常需要操纵数据以创建行项目或将行项目转换回文本字段数据。因此，为了使用行项目，您的触发应用程序和动作应用程序都必须支持其使用。如果其中一个应用程序不支持，则可以使用 `Formatter by Zapier` 和 **实用工具（Utilities)** 动作事件将行项目数据转换为兼容格式，以便与需要行项目数据或支持行项目的应用程序一起使用。我们可以使用以下转换函数：

+   **文本到行项目**

+   **行项目到文本**

+   **行项目转换器（创建/追加/前置）**

让我们回顾一下如何使用 **文本到行项目** 转换函数将文本转换为行项目。

## 将文本转换为行项目

使用内置的 `Formatter by Zapier` 应用程序和 `苹果，梨，奇异果` 或 `苹果，` `梨，奇异果`。

当你拥有文本格式的数据并希望在其他支持行项目使用的应用中创建行项目时，你可能想执行此操作。在前面的示例中，文本将被转换为`["苹果"，"梨"，"奇异果"]`。

这里有一些可以使用此转换选项的示例：

+   你的 CRM 可能具有与你的交易关联的多个产品列表、数量和价格，当交易达到管道中的某个阶段时，你可能需要在你的会计系统中创建一个发票。你的 CRM 不支持行项目，因此交易中的产品信息以文本形式呈现。您可以使用 **文本到行项目** 转换函数将文本更改为行项目，以便您可以在您的会计系统 QuickBooks Online 中生成发票。

+   您可能会使用嵌入在网站中的网络表单接受特殊产品订单。一旦接到订单，你想将订单的每一部分转换为行项目，以便你可以在谷歌电子表格中创建单独的行。您可以使用**文本到行项目**转换函数来完成此操作。

让我们讨论如何使用 **文本到行项目** 转换选项设置一个动作步骤。

### 配置好 **文本到行项目** 转换选项的实用工具动作事件

设置好触发步骤后，你可以使用**实用工具** 动作事件。

一旦你添加了一个动作步骤，无论是选择 **动作** 步骤还是点击 **+** 图标，将 **Formatter by Zapier** 作为应用程序并选择 **实用工具 (Utilities)** 作为动作事件后，你可以按以下方式编辑**动作**部分的字段：

+   **转换**：从下拉菜单中选择 **文本到行项目** 选项。这是一个必选字段，必须为 Zap 执行添加一个值。

+   **输入**：您可以使用此字段将要转换为行项目的逗号分隔文本值映射进来。您可以输入静态值，之前步骤中的动态值，或两者的组合，来指定此值。虽然这不是必需字段，但如果没有值，格式化函数将不会返回结果。

截图中显示了一个示例：

![图 18.10 – 使用 Zapier Formatter 工具操作事件将文本更改为行项目的概述](img/B18474_18_10.jpg)

图 18.10 – 使用 Zapier Formatter 工具操作事件将文本更改为行项目的概述

点击**继续**按钮。然后您可以使用**测试**部分将逗号分隔文本转换为行项目数组。*图 18**.10*中的情形结果如下截图所示：

![图 18.11 – 转换文本为行项目时返回的数据概述](img/B18474_18_11.jpg)

图 18.11 – 转换文本为行项目时返回的数据概述

*图 18**.11*中显示的输出显示为一个行项目，带有三行数据。

在您的**实用程序**操作事件步骤之后继续添加一个或多个操作步骤。

您现在应该更好地了解何时以及如何使用**文本到行项目**转换函数。

接下来，让我们讨论如何通过**行项目转为文本**转换函数来撤销此操作并将行项目转换为文本。

## 将行项目转换为文本

我们刚刚讨论了如何将逗号分隔文本转换为行项目。在某些情况下，您希望做相反的操作，也就是将行项目数据转换为逗号分隔文本。我们可以使用 Zapier 内置应用的**实用程序**操作事件和**行项目转为文本**转换选项来实现这一点。

在相同的操作步骤中，我们还可以像**分割文本**转换函数一样拆分所得文本为单独的字段，如在*第十七章*中讨论的，*Zapier 中的文本格式化函数–* *第 2 部分*。

例如，您可能在您的会计应用 Xero 中提高发票，用于销售的产品。您还在发票中单独包括交付费用作为一项单独的发票行项目。创建了发票后，您希望向团队在 Slack 发送消息，内容是已经销售的产品的详细信息，而不是交付费用。

让我们使用这个示例来说明如何使用并设置具有**行项目转为文本**转换选项的操作步骤。

### 设置具有行项目转为文本转换选项的实用程序操作事件

一旦您设置了触发步骤，就可以使用**实用程序**操作事件。

一旦添加了一个操作步骤，要么通过选择**操作**步骤，要么点击**+**图标，并选择了**Zapier Formatter**作为应用和**实用程序**作为操作事件，就可以编辑**操作**部分的字段，如下所示：

+   **转换**：从下拉菜单中选择**行项目转为文本**选项。这是一个必填字段，必须为 Zap 提供一个值才能运行。

+   **输入**：您可以使用此字段映射您想要转换为行项目的数据的值。您可以输入静态值、前一步的动态值或两者的组合来指定此值。虽然这不是一个必填字段，但如果没有值，格式化函数将不会返回结果。

+   `[:空格:]` 语法。虽然这不是一个必填字段，但如果留空，则默认值将为`,`字符。

下面的屏幕截图显示了一个示例：

![图 18.12 - ﻿使用 Formatter by Zapier 实用程序操作事件将行项目更改为文本并将其拆分为单独字段的概述](img/B18474_18_12.jpg)

图 18.12 - 使用 Formatter by Zapier 实用程序操作事件将行项目更改为文本并将其拆分为单独字段的概述

单击**继续**按钮。然后，您可以使用**测试**部分将行项目转换为逗号分隔的文本并拆分为单独的字段。来自*图 18**.12*场景的结果显示在下面的屏幕截图中：

![图 18.13 - ﻿将行项目转换为拆分为字段的文本时返回的数据概述](img/B18474_18_13.jpg)

图 18.13 - 将行项目转换为拆分为字段的文本时返回的数据概述

*图 18**.13*中显示的输出是单独的字段项（`item_1`、`item_2`和`item_last`），以及完全转换为逗号分隔的`文本`。

在您的**实用程序**操作步骤之后继续添加一个或多个操作步骤。

您现在应该更好地了解何时以及如何使用**行项目转为文本**转换函数。

接下来，让我们探索使用**行项目化器（创建/追加/前置）**转换函数创建、追加和前置行项目。

## 使用行项目化器创建、追加或前置行项目

能够创建行项目，附加额外项目到行项目分组的末尾，或在行项目分组的开头插入额外项目 - 并且都在一个操作步骤中完成 - 是非常有用的。如果您的数据中有来自触发器应用的变量需要推送到另一个应用程序以确保一致性，那么这将是最常见的需求。或者，您可能需要从几个不同的操作步骤中汇总数据并组合数据以形成行项目。例如，您可能通过 ThriveCart 等购物车应用程序销售产品，并需要将交易信息添加到 QuickBooks Online。您可能会发现，您需要使用产品搜索来检索产品 ID，并从附加销售中组合订单信息。您可能还需要为优惠券和运费添加数量`1`，这些信息在购物车的数据中可能没有表示。您可以使用 Formatter by Zapier 内置应用程序与`价格`和`数量`完成所有这些操作。

让我们以此示例说明如何使用并设置带有 **行项转换器 (创建/追加/前置)** 选项的操作步骤。

### 使用行项转换器 (创建/追加/前置) 选项设置实用工具操作事件

一旦设置了触发步骤，您就可以使用 **实用工具** 操作事件。

一旦添加了操作步骤，无论是选择 **操作** 步骤还是单击 **+** 图标，并选择 **Formatter by Zapier** 作为应用程序，**Utilities** 作为操作事件，您都可以编辑 **操作** 部分中的字段，如下所示：

+   **转换器**：从下拉菜单中选择 **行项转换器 (创建/追加/前置)** 选项。这是一个必需的字段，必须为 Zap 提供一个值才能运行。

+   `发票`、`订单` 或 `发票的行项`。您可以输入静态值、来自先前步骤的动态值或二者的组合，以指定此值。默认为 **行项(s)**。

+   `产品代码`、`描述`、`价格`、`数量` 等等。左列仅接受静态文本。在右列中，当创建行项时，输入逗号分隔的文本或单个值。在追加或前置时，您可以将行项与逗号分隔的文本或单个值组合。您可以输入静态值、来自先前步骤的动态值或二者的组合，以指定右列中的值。通过单击 **+** 按钮添加额外的行，并通过单击行末的 **X** 按钮删除行。虽然这不是一个必需的字段，但如果没有值，格式化器函数将不会返回结果。

+   `价格` 或 `数量` (`Qty`)，这些值可以相乘以创建 `小计` 属性。如果您发送数据的应用程序需要 `总计` 值，这将使您无需添加另一个格式化器操作步骤来创建这些值。您可以输入静态值、来自先前步骤的动态值或二者的组合来指定此值。默认为 **否**。

+   **小计值的小数位数**：如果您为 **创建小计属性？** 字段选择了 **是**，则可以输入要显示小计的小数位数。您可以输入静态值、来自先前步骤的动态值或二者的组合，以指定此值。

下图显示了一个示例，在该示例中，例如将标准交付费用添加到一组行项中：

![图 18.14 – 使用 Formatter by Zapier 实用工具操作事件创建、追加或前置行项数据的概览](img/B18474_18_14.jpg)

图 18.14 – 使用 Formatter by Zapier 实用工具操作事件创建、追加或前置行项数据的概览

点击**继续**按钮。然后，您可以使用**测试**部分创建、附加和添加行项目。*图 18**.14*中的场景结果如下所示：

![图 18.15 – 创建、附加和添加行项目数据时返回数据的概述](img/B18474_18_15.jpg)

图 18.15 – 创建、附加和添加行项目数据时返回数据的概述

在*图 18**.15*中显示的输出为`描述`、`价格`、`产品代码`、`数量`和`小计`的单独行项目。

在**工具**操作步骤之后，继续添加一个或多个动作步骤。

以下是一些由 Zapier 创建的有用资源，当您在 Formatter by Zapier 中使用行项目时，这些资源将进一步帮助您：

+   [`zapier.com/blog/formatter-line-item-automation/`](https://zapier.com/blog/formatter-line-item-automation/)

+   [`help.zapier.com/hc/en-us/articles/8496277737997-Use-line-items-in-Zaps#1-identify-your-trigger-s-line-item-fields-0-0`](https://help.zapier.com/hc/en-us/articles/8496277737997-Use-line-items-in-Zaps#1-identify-your-trigger-s-line-item-fields-0-0)

+   [`community.zapier.com/featured-articles-65/formatter-features-line-itemizer-overview-11844`](https://community.zapier.com/featured-articles-65/formatter-features-line-itemizer-overview-11844)

+   [`community.zapier.com/featured-articles-65/an-example-of-how-to-use-the-line-itemizer-feature-of-our-formatter-app-7272`](https://community.zapier.com/featured-articles-65/an-example-of-how-to-use-the-line-itemizer-feature-of-our-formatter-app-7272)

现在，您应该更好地理解何时以及如何使用**文本转行项目**、**行项目转文本**和**行项目化器（创建/附加/添加）**转换功能来操作行项目了。

# 总结

在本章中，我们通过介绍了 Formatter by Zapier 内置应用程序的**工具**操作事件来完成了对该应用程序功能的探索。首先，我们介绍了 Formatter by Zapier **工具**操作事件。然后，我们讨论了如何导入 CSV 文件，如何使用查找表来存储和帮助您查找相关数据，以及如何从值列表中选择数据。最后，我们介绍了与在自动化中使用行项目相关的各种转换功能。

您现在知道如何使用 Formatter by Zapier 内置应用程序来转换多种不同的功能，包括导入 CSV 文件、使用查找表、从列表中选择数据、将文本转换为行项目及其反向操作，以及行项目的创建和自定义。

在下一章中，您将学习如何通过结合**人工智能**（**AI**）和自动化来提高工作效率。我们将探讨一些 Zapier 内置的 AI 功能，例如 ChatGPT 插件和 Build A Zap AI 功能，以及 OpenAI 和 ChatGPT 与 Zapier 的集成。

# 问题

1.  如果你运营一个客户支持服务台，并且想要将工单随机分配给支持代理人，你可以使用哪个 Formatter by Zapier **Utilities**的转换选项？

1.  哪种类型的应用通常将数据表示为行项目？
