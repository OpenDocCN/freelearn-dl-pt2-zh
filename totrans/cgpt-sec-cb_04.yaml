- en: '4'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '4'
- en: Governance, Risk, and Compliance (GRC)
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 治理、风险和合规性（GRC）
- en: With the digital landscape becoming more intertwined and complex, managing cybersecurity
    risks and maintaining compliance has become increasingly challenging. This chapter
    offers insightful solutions by demonstrating how ChatGPT, harnessed with the power
    of the OpenAI API, can significantly enhance the efficiency and effectiveness
    of your cybersecurity infrastructure.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 随着数字化景观变得越来越紧密和复杂，管理网络安全风险和保持合规性变得越来越具有挑战性。本章通过展示如何利用 ChatGPT 搭配 OpenAI API
    的力量，极大地提高了网络安全基础设施的效率和效果，提供了富有洞见的解决方案。
- en: Throughout the chapter, you will discover how to leverage the capabilities of
    ChatGPT to **generate comprehensive cybersecurity policies**, simplifying the
    intricate task of policy creation. We will walk you through an innovative approach
    that allows granular control over each section of the policy document, delivering
    a robust cybersecurity framework that’s tailored to your specific business needs.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在整章中，您将发现如何利用 ChatGPT 的能力**生成全面的网络安全政策**，简化政策制定的复杂任务。我们将带您走过一种创新方法，允许对政策文件的每个部分进行细粒度控制，提供了一个符合您特定业务需求的健壮的网络安全框架。
- en: Building upon this groundwork, we will then delve into the nuances of **deciphering
    complex cybersecurity standards**. ChatGPT acts as a guide, breaking down convoluted
    compliance requirements into manageable, clear steps, thus providing a streamlined
    path to ensuring standards compliance.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在此基础上，我们将深入探讨**解读复杂的网络安全标准**的微妙之处。ChatGPT 充当向导，将复杂的合规要求分解为可管理、清晰的步骤，从而为确保合规提供了简化的路径。
- en: Furthermore, we will explore the critical domain of **cyber risk assessment**,
    unveiling how automation can revolutionize this vital process. You will gain insights
    into identifying potential threats, assessing vulnerabilities, and recommending
    suitable controls, leading to a substantial enhancement in your organization’s
    ability to manage cybersecurity risks.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们将探讨**网络风险评估**的关键领域，揭示自动化如何革新这一重要流程。您将深入了解如何识别潜在威胁，评估漏洞，并推荐合适的控制措施，从而大幅提升您的组织管理网络安全风险的能力。
- en: Following risk assessment, the focus shifts toward **prioritizing these risks
    effectively**. You will learn how ChatGPT can assist in creating an **objective
    scoring algorithm** based on various risk-related factors, enabling you to strategically
    allocate resources to manage the highest-priority risks.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在风险评估之后，焦点转向**有效地对这些风险进行优先排序**。您将学习如何使用 ChatGPT 辅助创建基于各种风险相关因素的**客观评分算法**，从而使您能够战略性地分配资源来管理最高优先级的风险。
- en: Finally, we will address the essential task of **risk report generation**. Detailed
    risk assessment reports not only serve as a valuable record of identified risks
    and mitigation strategies but also ensure clear communication between stakeholders.
    We will demonstrate how ChatGPT can automate the creation of such reports, saving
    time and maintaining consistency across all documentation.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将解决**风险报告生成**这一重要任务。详细的风险评估报告不仅作为确定的风险和缓解策略的宝贵记录，还确保了各利益相关者之间的清晰沟通。我们将演示如何使用
    ChatGPT 自动创建这些报告，节省时间并确保所有文档的一致性。
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下内容：
- en: Security Policy and Procedure Generation
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安全政策和程序生成
- en: ChatGPT-Assisted Cybersecurity Standards Compliance
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ChatGPT 辅助的网络安全标准合规
- en: Creating a Risk Assessment Process
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建风险评估流程
- en: ChatGPT-Assisted Risk Ranking and Prioritization
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ChatGPT 辅助风险排名和优先级排序
- en: Building Risk Assessment Reports
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 构建风险评估报告
- en: Technical requirements
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: For this chapter, you will need a **web browser** and a stable **internet connection**
    to access the ChatGPT platform and set up your account. You will also need to
    have your OpenAI account set up and have obtained your API key. If not, revisit
    [*Chapter 1*](B21091_01.xhtml#_idTextAnchor022) for details. Basic familiarity
    with the Python programming language and working with the command line is necessary,
    as you’ll be using **Python 3.x**, which needs to be installed on your system,
    for working with the OpenAI GPT API and creating Python scripts. A **code editor**
    will also be essential for writing and editing Python code and prompt files as
    you work through the recipes in this chapter.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 对于本章，你将需要一个**网络浏览器**和稳定的**互联网连接**来访问 ChatGPT 平台并设置你的账户。你还需要设置好你的 OpenAI 账户并获取你的
    API 密钥。如果没有，请参考[*第 1 章*](B21091_01.xhtml#_idTextAnchor022)中的详细信息。对 Python 编程语言的基本熟悉以及使用命令行工作的经验是必要的，因为你将使用**Python
    3.x**，它需要安装在你的系统上，用于与 OpenAI GPT API 交互和创建 Python 脚本。一个**代码编辑器**也是必不可少的，用于编写和编辑
    Python 代码和提示文件，因为你将在本章的示例中使用它们。
- en: 'The code files for this chapter can be found here: [https://github.com/PacktPublishing/ChatGPT-for-Cybersecurity-Cookbook](https://github.com/PacktPublishing/ChatGPT-for-Cybersecurity-Cookbook).'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的代码文件可以在这里找到：[https://github.com/PacktPublishing/ChatGPT-for-Cybersecurity-Cookbook](https://github.com/PacktPublishing/ChatGPT-for-Cybersecurity-Cookbook)。
- en: Security Policy and Procedure Generation
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安全策略与程序生成
- en: In this recipe, you will leverage the capabilitiese3 of ChatGPT and the OpenAI
    API to generate a **comprehensive cybersecurity policy** for your organization.
    This process is invaluable for IT managers, **chief information security officers**
    (**CISOs**), and cybersecurity professionals looking to create a robust cybersecurity
    framework that is tailored to their specific business requirements.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在本篇中，你将利用 ChatGPT 和 OpenAI API 的能力为你的组织生成一份**全面的网络安全策略**。对于希望创建符合其特定业务要求的健壮网络安全框架的
    IT 管理员、**首席信息安全官（CISO）**和网络安全专业人员来说，这个过程是非常宝贵的。
- en: Building upon the knowledge acquired in previous chapters, you will establish
    the role of ChatGPT as a seasoned cybersecurity professional, specializing in
    **governance, risk, and compliance** (**GRC**). You’ll learn how to generate an
    organized policy outline using ChatGPT and then iteratively fill in the context
    for each section using subsequent prompts. This approach enables you to generate
    comprehensive documents with granular control over each section, despite ChatGPT’s
    token limit and context window.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 基于前几章学到的知识，你将确立 ChatGPT 作为一名经验丰富的网络安全专业人员的角色，专注于**治理、风险和合规**（**GRC**）。你将学习如何使用
    ChatGPT 生成一个组织良好的策略大纲，然后使用后续提示逐步填写每个部分的上下文。这种方法使你能够在 ChatGPT 的令牌限制和上下文窗口的情况下，对每个部分进行精细控制地生成综合文档。
- en: Additionally, this recipe will provide a walk-through on how to use the OpenAI
    API and Python to automate the policy generation process, and subsequently, generate
    a cybersecurity policy as a Microsoft Word document. This step-by-step guide will
    provide a practical framework for producing detailed and tailored cybersecurity
    policies using ChatGPT and the OpenAI API.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 另外，本篇将介绍如何使用 OpenAI API 和 Python 自动化策略生成过程，并随后生成一份网络安全策略作为 Microsoft Word 文档。这一步骤指南将为使用
    ChatGPT 和 OpenAI API 生成详细和定制化的网络安全策略提供实用框架。
- en: Getting ready
  id: totrans-21
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Before diving into this recipe, ensure you have your OpenAI account set up
    and your API key on hand. If not, you should refer back to [*Chapter 1*](B21091_01.xhtml#_idTextAnchor022)
    for the necessary setup details. You will also need to confirm you have the following
    Python libraries installed:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在深入本篇之前，请确保你已经设置好你的 OpenAI 账户并准备好你的 API 密钥。如果没有，请参考[*第 1 章*](B21091_01.xhtml#_idTextAnchor022)中的设置细节。你还需要确认你已安装以下
    Python 库：
- en: '`openai`: This library enables you to interact with the OpenAI API. Install
    it using the `pip install` `openai` command.'
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`openai`：这个库使你能够与 OpenAI API 进行交互。使用`pip install openai`命令安装它。'
- en: '`os`: This is a built-in Python library, which allows you to interact with
    the operating system, especially for accessing environment variables.'
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`os`：这是一个内置的 Python 库，允许你与操作系统进行交互，特别是用于访问环境变量。'
- en: '`docx`: This library is used to generate Microsoft Word documents. Install
    it with `pip` `install python-docx`.'
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`docx`：这个库用于生成 Microsoft Word 文档。使用`pip install python-docx`安装它。'
- en: '`markdown`: This library is used to convert Markdown to HTML, which is useful
    for generating formatted documents. Install it with `pip` `install markdown`.'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`markdown`：此库用于将 Markdown 转换为 HTML，这对于生成格式化文档很有用。使用 `pip` `install markdown`
    进行安装。'
- en: '`tqdm`: This library is utilized for showing progress bars during the policy
    generation process. Install it with `pip` `install tqdm`.'
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`tqdm`：此库用于在策略生成过程中显示进度条。使用 `pip` `install tqdm` 进行安装。'
- en: Once you have verified that all these requirements are met, you are ready to
    get started on generating a cybersecurity policy with ChatGPT and the OpenAI API.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您确认所有这些要求都已满足，您就可以开始使用 ChatGPT 和 OpenAI API 生成网络安全策略。
- en: How to do it…
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'In this section, we will guide you through the process of using ChatGPT to
    generate a detailed cybersecurity policy that aligns with your organization’s
    needs. By providing the necessary details and using the given system role and
    prompts, you will be able to generate a well-structured cybersecurity policy document:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将指导您使用 ChatGPT 生成与您组织需求一致的详细网络安全政策的过程。通过提供必要的细节并使用给定的系统角色和提示，您将能够生成一个结构良好的网络安全政策文档：
- en: Start by logging in to your OpenAI account and navigating to the ChatGPT web
    UI.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先登录到您的 OpenAI 帐户，并导航到 ChatGPT Web UI。
- en: Initiate a new conversation with ChatGPT by clicking the **New** **chat** button.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过单击**新建** **聊天**按钮与 ChatGPT 开始新对话。
- en: 'Enter the following system role to set the context for ChatGPT:'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入以下系统角色以设置 ChatGPT 的上下文：
- en: '[PRE0]'
  id: totrans-34
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Then, enter the following message text, replacing the placeholders in the `{
    }` brackets with relevant information based on your organization’s needs. You
    can either combine this prompt with the system role or enter it separately as
    follows (replacing the company name and type with your own):'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，输入以下消息文本，根据您组织的需求替换 `{ }` 括号中的占位符。您可以将此提示与系统角色结合，也可以分开输入，如下所示（用您自己的公司名称和类型替换）：
- en: '[PRE1]'
  id: totrans-36
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Review the output from ChatGPT. If it is satisfactory and aligns with your requirements,
    you can proceed to the next step. If not, you have the option to refine your prompt
    or run the conversation again to generate a different output.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看 ChatGPT 的输出。如果满意且符合您的要求，则可以继续下一步。如果不符合，您可以选择修改您的提示或重新运行对话以生成不同的输出。
- en: 'Generate the policy from the outline. For each section of the outline, prompt
    ChatGPT with the following, replacing `{section}` with the appropriate section
    title from the outline:'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从大纲中生成策略。对于大纲的每个部分，请使用以下内容提示 ChatGPT，将 `{section}` 替换为大纲中相应的部分标题：
- en: '[PRE2]'
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Once you have the desired output, you can copy and paste the generated responses
    directly into a Word document, or editor of your choice, to create a comprehensive
    cybersecurity policy document.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦您获得所需的输出，您可以直接将生成的响应复制并粘贴到 Word 文档或您选择的编辑器中，以创建一个全面的网络安全政策文档。
- en: How it works…
  id: totrans-41
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理…
- en: 'This GPT-assisted cybersecurity policy creation recipe taps into the power
    of **natural language processing** (**NLP**) and machine learning algorithms to
    produce a tailored and comprehensive cybersecurity policy that caters to the needs
    of your organization. By assuming a specific system role and utilizing a detailed
    user request as a prompt, ChatGPT is capable of tailoring its output to meet the
    demands of a cybersecurity professional, tasked with generating a detailed policy.
    Here’s a deeper look into how this process functions:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 这种 GPT 辅助的网络安全政策创建配方利用了自然语言处理（NLP）和机器学习算法的力量，产生了一个定制的、全面的网络安全政策，以满足您组织的需求。通过扮演特定的系统角色并利用详细的用户请求作为提示，ChatGPT
    能够调整其输出以满足网络安全专业人士的要求，这些人负责生成详细的政策。以下是这个过程如何运作的更深入的解释：
- en: '**System role and detailed prompt**: The system role casts ChatGPT as a seasoned
    cybersecurity professional, specializing in GRC. The prompt, which acts as the
    user request, is detailed and describes the specifics of the policy outline, from
    the nature of the company to the requirements of the cybersecurity policy. These
    inputs provide context and steer ChatGPT’s response, ensuring it caters to the
    complexities and requirements of the policy creation task.'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**系统角色和详细提示**：系统角色将 ChatGPT 描绘为一位经验丰富的网络安全专业人士，专业于 GRC。提示作为用户请求，详细描述了政策大纲的特定内容，从公司性质到网络安全政策的要求都有涉及。这些输入提供了上下文，并引导
    ChatGPT 的响应，确保其满足政策创建任务的复杂性和要求。'
- en: '**Natural language processing and machine learning**: NLP and machine learning
    are the foundation of ChatGPT’s capabilities. It uses these technologies to comprehend
    the complexities of the users requests, to learn from the patterns, and to generate
    a well-structured cybersecurity policy that is detailed, specific, and comprehensive.'
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**自然语言处理和机器学习**：NLP 和机器学习是 ChatGPT 能力的基础。它使用这些技术来理解用户请求的复杂性，学习模式，并生成详细、具体、全面的结构良好的网络安全政策。'
- en: '**Knowledge and language understanding capabilities**: ChatGPT leverages its
    vast knowledge base and language understanding capabilities to adhere to industry-standard
    methodologies and best practices. This is crucial in the swiftly evolving realm
    of cybersecurity, ensuring that the generated cybersecurity policy is current
    and complies with recognized standards.'
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**知识和语言理解能力**：ChatGPT 利用其广泛的知识库和语言理解能力，遵循行业标准方法和最佳实践。这在网络安全迅速发展的领域至关重要，确保生成的网络安全政策是最新的并符合公认标准。'
- en: '**Iterative policy generation**: The process of creating the detailed policy
    from the generated outline involves prompting ChatGPT iteratively for each section
    of the policy. This allows for more granular control over the content of each
    section and helps ensure that the policy is well structured and organized.'
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**迭代式政策生成**：从生成的大纲中创建详细政策的过程涉及到逐步提示 ChatGPT 每个政策部分。这样做可以更精细地控制每个部分的内容，有助于确保政策结构良好、有条理。'
- en: '**Streamlining the policy creation process**: The overall benefit of utilizing
    this GPT-assisted cybersecurity policy creation recipe is that it streamlines
    the process of creating a comprehensive cybersecurity policy. It reduces the time
    spent on policy creation and allows for the generation of a professional-grade
    policy that aligns with industry standards and the specific needs of your organization.'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**简化政策创建流程**：利用这个 GPT 辅助的网络安全政策创建配方的整体好处在于，它简化了创建全面网络安全政策的流程。它减少了政策制定所需的时间，允许生成符合行业标准和您组织特定需求的专业级政策。'
- en: By employing these detailed inputs, you transform ChatGPT into a potentially
    invaluable tool that can assist in creating an exhaustive, tailored cybersecurity
    policy. This not only strengthens your cybersecurity posture but also ensures
    that your resources are effectively employed in safeguarding your organization.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 通过采用这些详细的输入，您将 ChatGPT 转变为一个潜在的宝贵工具，可以帮助创建详尽、量身定制的网络安全政策。这不仅增强了您的网络安全姿态，还确保您的资源得到有效利用，保护您的组织。
- en: There’s more…
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多…
- en: Building on the ChatGPT recipe, you can enhance the functionality by using OpenAI’s
    API to not only generate a cybersecurity policy outline but also to fill in the
    details of each section. This approach is helpful when you want to create detailed
    documents on-the-fly or generate policies for multiple companies with different
    requirements.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 在 ChatGPT 配方的基础上，您可以通过使用 OpenAI 的 API 来增强功能，不仅可以生成网络安全政策大纲，还可以填写每个部分的详细信息。当您想要即时创建详细文件或为具有不同要求的多家公司生成政策时，这种方法很有帮助。
- en: 'This Python script incorporates the same idea as our ChatGPT version, but with
    additional functionality provided by the OpenAI API grants more control and flexibility
    over the content generation process. We will now discuss the different steps involved
    in the OpenAI API version of the cybersecurity policy generation recipe:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 此 Python 脚本采用与我们 ChatGPT 版本相同的思想，但 OpenAI API 提供的附加功能更多地控制了内容生成过程的灵活性。我们现在将讨论
    OpenAI API 版本网络安全政策生成配方涉及的不同步骤：
- en: 'Import the necessary libraries and set up the OpenAI API:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入必要的库并设置 OpenAI API：
- en: '[PRE3]'
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: In this step, we import the required libraries, such as `openai`, `os`, `docx`,
    `markdown`, and `tqdm`. We set up the OpenAI API by providing the API key.
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在这一步中，我们导入所需的库，如 `openai`、`os`、`docx`、`markdown` 和 `tqdm`。我们通过提供 API 密钥来设置 OpenAI
    API。
- en: 'Prepare the initial prompt for the cybersecurity policy outline:'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为网络安全政策大纲准备初始提示：
- en: '[PRE4]'
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The initial prompt is constructed using a conversation with two roles: `system`
    and `user`. The `system` message sets the context, informing the AI model about
    its role as a seasoned cybersecurity professional. The `user` message instructs
    the AI model to create a cybersecurity policy outline for a credit union, specifying
    the need for Markdown formatting.'
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使用两个角色的对话构建初始提示：`系统`和`用户`。`系统`消息设置上下文，告知 AI 模型其作为经验丰富的网络安全专业人员的角色。`用户`消息指导 AI
    模型为信用联盟创建网络安全政策大纲，指定需要 Markdown 格式。
- en: 'Generate the cybersecurity policy outline using the OpenAI API:'
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 OpenAI API 生成网络安全政策大纲：
- en: '[PRE5]'
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: This section sends the request to the OpenAI API, and upon successful completion,
    retrieves the generated policy outline.
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 本部分将请求发送到OpenAI API，成功后检索生成的政策大纲。
- en: 'Split the outline into sections and prepare a Word document:'
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将大纲分成不同的部分，准备 Word 文档：
- en: '[PRE6]'
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Here we split the outline into different sections, each containing a Markdown-formatted
    heading or subheading. We then initialize a new Word document using the `docx.Document()`
    function.
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在此我们将大纲分成不同的部分，每个部分都包含 Markdown 格式的标题或副标题。使用 `docx.Document()`函数初始化一个新的 Word
    文档。
- en: 'Loop over each section in the outline, generating detailed information:'
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 循环处理大纲的每个部分，生成详细信息：
- en: '[PRE7]'
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Here we loop over each section of the outline. The `tqdm` function is used to
    display a progress bar.
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在此我们循环处理大纲的每个部分。使用`tqdm`函数显示进度条。
- en: 'Prepare the prompt for the AI model to generate the detailed information for
    the current section:'
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 准备 AI 模型生成当前部分详细信息的提示：
- en: '[PRE8]'
  id: totrans-68
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: The prompt for the AI model is prepared, instructing it to generate detailed
    information for the current section.
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 准备 AI 模型生成当前部分详细信息的提示。
- en: 'Generate detailed information for the current section and add it to the Word
    document:'
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 生成当前部分的详细信息并将其添加到 Word 文档中：
- en: '[PRE9]'
  id: totrans-71
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Here we generate detailed information for the current section using the OpenAI
    API. The Markdown-formatted text is converted to Word formatting and added to
    the Word document. It is also converted to HTML and added to the `html_text` string.
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在此我们使用 OpenAI API 为当前部分生成详细信息。Markdown 格式的文本转换成 Word 格式，并添加到 Word 文档中。还将其转换为
    HTML，并添加到 `html_text` 字符串中。
- en: 'Save the current state of the Word and HTML documents:'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存当前 Word 和 HTML 文档的状态：
- en: '[PRE10]'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: The current state of the Word document and the HTML document is saved after
    each section is processed. This ensures that you do not lose any progress if the
    script is interrupted.
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 每处理完一个部分，都会保存 Word 文档和 HTML 文档的当前状态。这样，即使脚本中断，也不会丢失任何进度。
- en: 'Print a completion message after all sections have been processed:'
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 处理完所有部分后，打印完成消息：
- en: '[PRE11]'
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Here’s how the completed script should look:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 这是脚本的完整样子：
- en: '[PRE12]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: This Python script automates the process of generating a detailed cybersecurity
    policy outline for a specific company, XYZ Corp., a credit union. The script initiates
    by importing the necessary libraries, setting the OpenAI API key, and preparing
    the initial prompt for the AI model, instructing it to generate the policy outline.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 此 Python 脚本自动化生成针对特定公司 XYZ Corp.（一家信用联盟）的详细网络安全政策大纲的过程。首先导入必要的库，设置 OpenAI API
    密钥以及为 AI 模型准备初始提示，指示其生成政策大纲。
- en: On receiving a successful response from the OpenAI API, the script prints out
    the policy outline and breaks it down into separate sections for further detailing.
    A Word document is then initiated to record these details. The script then iterates
    over each section of the policy outline, generating and appending detailed information
    from the OpenAI API to the Word document and to an HTML string, effectively creating
    a detailed policy document in both Word and HTML formats.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 收到 OpenAI API 的成功响应后，脚本将策略大纲拆分为单独的部分以进一步详细描述。然后启动 Word 文档以记录这些详细信息。接着，脚本循环浏览策略大纲的每个部分，从
    OpenAI API 中生成并附加详细信息到 Word 文档和 HTML 字符串中，有效地在 Word 和 HTML 格式中创建了一份详细的政策文件。
- en: After each iteration, the script ensures the documents are saved, providing
    a safety net against potential data loss due to interruptions. Once all sections
    are covered and the documents are saved, the script signifies its successful completion.
    Thus, a high-level policy outline is expanded into a detailed, comprehensive cybersecurity
    policy, in a process fully automated using the OpenAI API and Python.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
- en: ChatGPT-Assisted Cybersecurity Standards Compliance
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this recipe, we will guide you on how to use ChatGPT to assist with **cybersecurity
    standards compliance**. This recipe builds on the skills gained from previous
    chapters. Understanding the requirements of cybersecurity standards can be complex,
    due to the manner in which they are typically written. With ChatGPT, you can simplify
    this task. By prompting ChatGPT with excerpts from a cybersecurity standard, the
    model can assist in breaking down these requirements into simpler terms, helping
    you determine whether you comply, and what steps need to be taken to become compliant
    if you are not.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  id: totrans-85
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Ensure you have access to the ChatGPT interface by logging in to your OpenAI
    account. Have a cybersecurity standard document on hand from which you can quote
    excerpts.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To utilize ChatGPT for understanding and checking compliance with cybersecurity
    standards, follow these steps:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
- en: Log in to the ChatGPT interface.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Assign a role to ChatGPT with the following prompt:'
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE13]'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: You should replace `industrial` with whichever industry you’re in.
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Then provide ChatGPT with your prompt:'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Remember to replace `'NIST SP 800-82 revision 2 standard'` with whichever cybersecurity
    standard you are working with.
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Provide ChatGPT with the first requirement ID, specifications, and any supplemental
    information:'
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 4.1 – Example of a ChatGPT response to a standards requirement query](img/Figure_4.1_B21091.jpg)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
- en: Figure 4.1 – Example of a ChatGPT response to a standards requirement query
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
- en: 'Engage with ChatGPT in a conversation based on the responses it provides, either
    delving deeper into a particular requirement or moving on to the next:'
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 4.2 – Example of a ChatGPT response to a standards requirement conversation](img/Figure_4.2_B21091.jpg)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
- en: Figure 4.2 – Example of a ChatGPT response to a standards requirement conversation
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
- en: How it works…
  id: totrans-102
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When you assign a role to ChatGPT, you provide a specific context or persona
    for the model to work with. This helps the model generate responses that are tailored
    to the given role, resulting in more accurate, relevant, and detailed content.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
- en: In the context of understanding and checking compliance with cybersecurity standards,
    ChatGPT uses its training data to interpret the excerpts from the standard, breaking
    them down into simpler, easier-to-understand terms. It then forms a question to
    assist you in determining whether or not you comply with the standard.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
- en: Throughout the process, you maintain a conversation with the model, either diving
    deeper into a specific requirement or moving on to the next one, based on your
    requirements.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在整个过程中，您要与模型进行对话，要么深入了解特定要求，要么根据您的需求转移到下一个要求。
- en: There’s more…
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多内容……
- en: Once you’re comfortable with this process, you can extend it to cover different
    standards across various industries.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您对此过程感到满意，您可以扩展它以涵盖各个行业中的不同标准。
- en: 'Here are some additional points to consider:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些额外要考虑的要点：
- en: '**ChatGPT as a training aid**: You can also use it as a teaching tool, utilizing
    the simplified explanations provided by ChatGPT to educate others in your organization
    about the requirements of different cybersecurity standards. Using the model to
    generate easily understandable interpretations of complex standards can be a useful
    supplement to more traditional forms of training.'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ChatGPT作为培训辅助工具**：您也可以将其用作教学工具，利用ChatGPT提供的简化解释来教育组织内其他人有关不同网络安全标准的要求。使用模型生成对复杂标准易于理解的解释可以作为对更传统的培训形式的有用补充。'
- en: '**Importance of regular check-ins**: Using ChatGPT to understand and check
    compliance with cybersecurity standards can be most effective when done regularly.
    Cybersecurity landscapes change quickly, and requirements with which an organization
    was once compliant could change. Regular check-ins can help keep your organization
    up to date.'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**定期检查的重要性**：定期使用ChatGPT来了解并检查网络安全标准的合规性可能更加有效。网络安全形势变化迅速，组织曾经合规的要求可能发生变化。定期检查能够帮助您的组织保持最新。'
- en: '**Potential limitations**: It’s worth noting that while ChatGPT is a powerful
    tool, it does have limitations. Its responses are based on its training data up
    until September 2021\. Therefore, for very recent standards or those that have
    been significantly updated since then, its responses might not be completely accurate.
    It’s always important to verify information with the most current version of the
    standard.'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**潜在的限制**：值得指出的是，虽然ChatGPT是一个强大的工具，但它确实有局限性。其响应基于截至2021年9月的培训数据。因此，对于非常最新的标准或自那时以来已经显著更新的标准，其响应可能不完全准确。始终验证最新版本标准的信息是非常重要的。'
- en: Important note
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 重要说明
- en: We will discuss more advanced methods of providing updated documents as a knowledge
    base later on in this book.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在本书的后面讨论更多提供更新文档作为知识库的高级方法。
- en: '**Importance of professional guidance**: While this approach can help a great
    deal in understanding the requirements of cybersecurity standards, it’s not a
    substitute for professional legal or cybersecurity guidance. Compliance with these
    standards often has legal implications, so professional advice is essential. Always
    consult with a professional when determining your organization’s compliance with
    any cybersecurity standard.'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**专业指导的重要性**：虽然这种方法在理解网络安全标准的要求方面可以起到很大作用，但它并不能替代专业的法律或网络安全指导。合规这些标准往往具有法律意义，因此专业建议是必不可少的。在确定组织是否符合任何网络安全标准时，请始终咨询专业人士。'
- en: '**Feedback and iteration**: As with any AI tool, the more you use ChatGPT and
    the more feedback you provide, the better it can assist you. The feedback loop
    allows the model to adjust and provide responses better tailored to your needs
    over time.'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**反馈和迭代**：与任何AI工具一样，您使用ChatGPT越多，提供的反馈越多，它就能够更好地帮助您。反馈循环使模型能够随时间调整并提供更适合您需求的响应。'
- en: Creating a Risk Assessment Process
  id: totrans-116
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建风险评估流程
- en: Cyber risk assessment is an essential part of an organization’s **risk management
    strategy**. This process involves identifying potential threats, assessing vulnerabilities
    that could be exploited by these threats, evaluating the impact that such an exploitation
    could have on the organization, and recommending suitable controls to mitigate
    the risk. Understanding the steps involved in conducting a risk assessment can
    significantly enhance an organization’s ability to manage cybersecurity risks.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 网络风险评估是组织**风险管理战略**中必不可少的一部分。该过程涉及识别潜在威胁，评估这些威胁可能利用的漏洞，评估此类利用对组织可能产生的影响，并建议适当的控制措施来减轻风险。了解进行风险评估涉及的步骤可以极大增强组织管理网络安全风险的能力。
- en: In this recipe, we will guide you through creating a cyber risk assessment process
    using Python and the OpenAI API. By automating the risk assessment process, you
    can streamline your workflow and make your security operations more efficient.
    This approach can also provide a standardized format for conducting risk assessments,
    which can improve consistency across your organization.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在此方案中，我们将指导您使用 Python 和 OpenAI API 创建一个网络风险评估过程。通过自动化风险评估过程，您可以简化工作流程，使安全操作更加高效。这种方法还可以提供进行风险评估的标准化格式，从而提高组织的一致性。
- en: Getting ready
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Before proceeding with this recipe, you will need the following:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续之前，您将需要以下内容：
- en: '**Python**. This recipe is compatible with **Python 3.6** or later.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Python**。此方案与 **Python 3.6** 或更高版本兼容。'
- en: An **OpenAI API key**. If you don’t have one, you can obtain it from the OpenAI
    website after signing up.
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**OpenAI API 密钥**。如果您还没有，可以在注册后从 OpenAI 网站获取。'
- en: The `pip` `install openai`.
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pip` `install openai`。'
- en: 'The Python `docx` library for creating Word documents. You can install it using
    pip: `pip` `install python-docx`.'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python `docx` 库用于创建 Word 文档。您可以使用 pip 安装它：`pip` `install python-docx`。
- en: 'The Python `tqdm` library for displaying progress. You can install it using
    pip: `pip` `install tqdm`.'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python `tqdm` 库用于显示进度。您可以使用 pip 安装它：`pip` `install tqdm`。
- en: The Python `threading` and `os` libraries, which are generally available with
    Python.
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python `threading` 和 `os` 库通常可用于 Python。
- en: Familiarity with Python programming and basic cybersecurity concepts.
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 熟悉 Python 编程和基本的网络安全概念。
- en: How to do it…
  id: totrans-128
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何实施…
- en: 'Let’s start creating our risk assessment process by building a script that
    uses the OpenAI API to generate the content of each section in our risk assessment
    plan. The script will ask ChatGPT to play the role of a cybersecurity professional
    specializing in GRC to provide us with a detailed narrative, context, and details
    for each section of the risk assessment process:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过构建一个使用 OpenAI API 为我们的风险评估计划中的每个部分生成内容的脚本来开始创建我们的风险评估过程。该脚本将要求 ChatGPT
    扮演一名专业从事 GRC 的网络安全专业人士的角色，为我们提供风险评估过程每个部分的详细叙述、上下文和细节：
- en: 'Import the necessary libraries:'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入必要的库：
- en: '[PRE15]'
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'This code block imports all the required libraries for our script: `openai`
    for interacting with the OpenAI API, `os` for environment variables, `Document`
    from `docx` for creating Word documents, threading and time for managing the time
    display during API calls, `datetime` for timestamping our report, and `tqdm` for
    progress visualization.'
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此代码块导入了我们脚本所需的所有库：`openai` 用于与 OpenAI API 交互，`os` 用于环境变量，`Document` 从 `docx`
    中用于创建 Word 文档，`threading` 和 `time` 用于管理 API 调用期间的时间显示，`datetime` 用于时间戳我们的报告，以及
    `tqdm` 用于进度可视化。
- en: 'Set up the OpenAI API key:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置 OpenAI API 密钥：
- en: '[PRE16]'
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: This code sets the OpenAI API key, which is stored as an environment variable.
    This key is required to authenticate our program’s requests to the OpenAI API.
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此代码设置了存储为环境变量的 OpenAI API 密钥。此密钥用于验证我们程序对 OpenAI API 的请求。
- en: 'Determine a unique identifier for the assessment report:'
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确定评估报告的唯一标识符：
- en: '[PRE17]'
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: We use the current date and time to create a unique name for each assessment
    report, ensuring that we don’t overwrite any previous reports. The name is formatted
    as `Risk_Assessment_Plan_{current_datetime}`, where `current_datetime` is the
    exact date and time when the script is run.
  id: totrans-138
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们使用当前日期和时间为每个评估报告创建一个唯一名称，确保不会覆盖任何以前的报告。名称格式为 `Risk_Assessment_Plan_{current_datetime}`，其中
    `current_datetime` 是运行脚本时的确切日期和时间。
- en: 'Define the outline for the risk assessment:'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义风险评估的大纲：
- en: '[PRE18]'
  id: totrans-140
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Here we define the outline for the risk assessment. The outline contains a list
    of all the sections to be included in the risk assessment process.
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在这里，我们定义了风险评估的大纲。大纲包含了要包括在风险评估过程中的所有部分的列表。
- en: Tip
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: You can modify the process steps to include whichever sections you feel appropriate,
    and the model will fill in the context for whichever sections you provide.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以修改流程步骤以包括您认为合适的任何部分，模型将为您提供的任何部分填充上下文。
- en: 'Implement a function to generate section content using the OpenAI API:'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 实现一个使用 OpenAI API 生成部分内容的函数：
- en: '[PRE19]'
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: This function takes as input the title of a section from our risk assessment
    outline and uses the OpenAI API to generate detailed content for that section.
  id: totrans-146
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此函数以风险评估大纲中的部分标题作为输入，并使用 OpenAI API 为该部分生成详细内容。
- en: 'Implement a function to convert Markdown text to a Word document:'
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 实现将 Markdown 文本转换为 Word 文档的函数：
- en: '[PRE20]'
  id: totrans-148
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: This function takes the generated Markdown text for each section and the desired
    output filename as inputs and creates a Word document with the same content.
  id: totrans-149
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此函数接受每个部分的生成的 Markdown 文本和所需的输出文件名作为输入，并使用相同的内容创建一个 Word 文档。
- en: 'Implement a function to display the elapsed time while waiting for the API
    call:'
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 实现一个函数来显示等待 API 调用时经过的时间：
- en: '[PRE21]'
  id: totrans-151
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: This function is responsible for displaying the elapsed time while waiting for
    the API call to complete. This is useful for tracking how long the process is
    taking.
  id: totrans-152
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此函数负责在等待 API 调用完成时显示经过的时间。这对于跟踪过程花费的时间很有用。
- en: 'Start the process for generating the report:'
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 开始生成报告的过程：
- en: '[PRE22]'
  id: totrans-154
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Here we start a separate thread to display the elapsed time. This runs concurrently
    with the main process that makes the API calls.
  id: totrans-155
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在此处，我们启动一个单独的线程来显示经过的时间。这与执行 API 调用的主进程同时运行。
- en: 'Iterate through each section in the risk assessment outline, generate the section
    content, and append it to the report:'
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 遍历风险评估大纲中的每个部分，生成部分内容，并将其附加到报告中：
- en: '[PRE23]'
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: This block of code loops through each section in our risk assessment outline,
    generates the content for that section using the OpenAI API, and appends the generated
    content to our report.
  id: totrans-158
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此代码块循环遍历我们的风险评估大纲中的每个部分，在使用 OpenAI API 生成该部分的内容后，将生成的内容附加到我们的报告中。
- en: 'Finalize the progress and elapsed time display once all sections have been
    generated:'
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当所有部分都已生成时，完成进度和经过的时间显示：
- en: '[PRE24]'
  id: totrans-160
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: The `api_call_completed` variable is set to `True` to indicate that all API
    calls have been completed. We then stop the elapsed time display thread and close
    the progress bar to signify that the process has ended.
  id: totrans-161
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将 `api_call_completed` 变量设置为 `True` 以指示所有 API 调用已完成。然后，我们停止经过的时间显示线程，并关闭进度条，以表示进程已结束。
- en: 'Finally, save the generated report as a Word document:'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，将生成的报告保存为 Word 文档：
- en: '[PRE25]'
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: In this final step, the `markdown_to_docx` function is called with the generated
    report (in Markdown format) and the desired output filename as arguments to create
    a Word document. The filename includes a timestamp to ensure it’s unique. This
    process is wrapped in a try-except block to handle any exceptions that might occur
    during this conversion. If successful, we print out a success message; if an error
    occurs, we print the exception to help with troubleshooting.
  id: totrans-164
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在此最终步骤中，调用`markdown_to_docx`函数，并将生成的报告（以 Markdown 格式）和所需的输出文件名作为参数，以创建一个 Word
    文档。文件名包含时间戳以确保其唯一性。此过程包装在 try-except 块中以处理此转换期间可能发生的任何异常。如果成功，我们打印出成功消息；如果发生错误，则打印异常以帮助排查问题。
- en: 'The final script should appear as follows:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 最终脚本应如下所示：
- en: '[PRE26]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: Now, let’s take a look at how it works.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看它是如何工作的。
- en: How it works…
  id: totrans-168
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: The Python script works by interacting with the OpenAI API to generate detailed
    content for each section of the risk assessment process. The content is generated
    by simulating a conversation between a user and a system (ChatGPT) where the system
    roleplays as a cybersecurity professional. The conversation messages provided
    to the API describe the context, and ChatGPT generates a comprehensive response
    based on that context.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: Python 脚本通过与 OpenAI API 交互来为风险评估过程的每个部分生成详细内容。内容是通过模拟用户和系统（ChatGPT）之间的对话生成的，其中系统扮演网络安全专业人士的角色。提供给
    API 的对话消息描述了上下文，而 ChatGPT 根据该上下文生成了全面的响应。
- en: In the OpenAI chat models, a list of messages is provided, and each message
    has a role and content. The role can be `system`, `user`, or `assistant`. The
    `system` role is typically used to set the behavior of `assistant`, and the `user`
    role is used to instruct `assistant`.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 在 OpenAI 聊天模型中，提供了一系列消息，每个消息都有一个角色和内容。角色可以是 `system`、`user` 或 `assistant`。`system`
    角色通常用于设置 `assistant` 的行为，而 `user` 角色用于指示 `assistant`。
- en: In this script, we first set the system role with the message `'You are a cybersecurity
    professional specializing in governance, risk, and compliance (GRC) with more
    than 25 years of experience.'`. This is to inform the model of the context, setting
    it up to respond as an experienced professional in the field of cybersecurity.
    The model uses this contextual information to generate responses that are appropriate
    and specific to the scenario.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 在此脚本中，我们首先使用消息 `'您是一位专门从事治理、风险和合规（GRC）的网络安全专业人员，拥有超过 25 年的经验。'` 来设置系统角色。这是为了告知模型上下文，使其以网络安全领域的经验丰富专业人士的身份进行响应。模型使用此上下文信息生成适当且特定于情景的响应。
- en: 'The `user` role’s message, `''You are currently writing a cyber risk assessment
    policy. Write the narrative, context, and details for the following section (and
    only this section): {section}. Use as much detail and explanation as possible.
    Do not write anything that should go in another section of the policy.''`, serves
    as the specific prompt for the model. This prompt guides the model to generate
    a detailed narrative for a specific section of a risk assessment policy. It instructs
    the model to remain focused on the current section and to not deviate into details
    that belong in other sections. By doing this, we ensure that the content generated
    is relevant and precise, adhering to the structure of a risk assessment process.'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
- en: So, in short, the `system` role sets up the context and expertise of `assistant`,
    while the `user` role provides a directive task for the assistant to perform.
    This method helps in obtaining structured and relevant content from the AI.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
- en: The script is structured to handle each section of the risk assessment process
    individually, making a separate API call for each section. It takes advantage
    of multi-threading to display the elapsed time while the API calls are being processed,
    giving a sense of progress.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
- en: The generated content for each section is appended to a report in Markdown format,
    which is then converted to a Word document using the Python `docx` library. This
    creates a well-structured, detailed risk assessment plan that can be used as a
    starting point for conducting risk assessments in an organization.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
- en: There’s more…
  id: totrans-176
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The risk assessment process created by this recipe is flexible. You can experiment
    with generating your own risk assessment process by using ChatGPT to write the
    content for different sections and then plug those outline sections into the script.
    This allows you to create a risk assessment process that is tailored to your organization’s
    specific needs and risk profile. Remember, the best risk assessment process is
    one that is continually updated and improved based on feedback and new insights.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
- en: ChatGPT-Assisted Risk Ranking and Prioritization
  id: totrans-178
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this recipe, we’ll leverage the capabilities of ChatGPT to **prioritize and
    rank cybersecurity risks** based on the given data. Prioritizing risks in cybersecurity
    is a crucial task that helps organizations focus their resources where they matter
    most. With the use of ChatGPT, you can make this task more manageable and objective.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
- en: In the given scenario, we have a dataset that includes a range of risk-related
    factors for different assets or systems. These factors include the type of asset,
    its criticality rating, the business function it serves, the size and rating of
    its attack surface, the attack vector rating, and the mitigations and remediations
    in place.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
- en: ChatGPT will assist us in creating a scoring algorithm based on this data to
    prioritize the risks. The highest-priority risks, as calculated by the scoring
    algorithm, will be listed at the top of a new table. We’ll guide you through the
    process using sample data, but you can apply the same process to your own data
    in the future.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  id: totrans-182
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Ensure you have access to the ChatGPT interface by logging in to your OpenAI
    account. You will also need a dataset containing a list of systems and their associated
    vulnerability and risk-related data. More instructions on what this should entail
    are included in this recipe.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
- en: If you do not have a dataset available, you can use the dataset provided in
    this recipe, which can be downloaded from [https://github.com/PacktPublishing/ChatGPT-for-Cybersecurity-Cookbook](https://github.com/PacktPublishing/ChatGPT-for-Cybersecurity-Cookbook).
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  id: totrans-185
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To start with risk ranking and prioritization, let’s send a detailed prompt
    to ChatGPT. The prompt should clearly state the task and provide the necessary
    context and data:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
- en: You can provide any system data you want as long as it is separated or delineated
    and has header names and discernable values that represent the level of risk,
    severity, value, and so on of the systems and vulnerabilities, which ChatGPT can
    use to create the appropriate algorithm.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
- en: 'Establish the system role by entering the following prompt:'
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE27]'
  id: totrans-190
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Instruct ChatGPT to create a scoring algorithm based on your data using the
    following prompt:'
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE28]'
  id: totrans-192
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'The following figure illustrates the scoring algorithm output created by ChatGPT:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 4.3 – Example of a scoring algorithm output](img/Figure_4.3_B21091.jpg)'
  id: totrans-194
  prefs: []
  type: TYPE_IMG
- en: Figure 4.3 – Example of a scoring algorithm output
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
- en: 'The following code is the example scoring algorithm code output generated by
    ChatGPT:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE29]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'The following figure illustrates an example of a formatted output from ChatGPT,
    which lists the assets, prioritized by the risk score created by the algorithm:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 4.4 – Example of a prioritization output](img/Figure_4.4_B21091.jpg)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
- en: Figure 4.4 – Example of a prioritization output
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
- en: The data provided in the prompt is tab-delineated. You can provide any system
    data you want as long as it is separated or delineated and has header names and
    discernable values that represent the level of risk, severity, value, and so on
    of the systems and vulnerabilities, which ChatGPT can use to create the appropriate
    algorithm.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
- en: Hint
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
- en: 'The sample data used for this recipe was generated with the following prompt:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
- en: '`"Generate a table of sample data I will be using for a hypothetical risk assessment
    example. The table should be at least 20 rows and contain the` `following columns:`'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
- en: '`Asset/System Type, Criticality Rating, Business Function, Attack Surface Size
    (a value that is derived from number of vulnerabilities found on the system),
    Attack Surface Rating (a value that is derived by calculating the number of high
    and critical severity ratings compared to the total attack surface), Attack Vector
    Rating (a value that is derived by the number of other systems that have access
    to this system, with internet facing being the automatic highest number), list
    of mitigations and remediations needed for this system (this would normally be
    derived by the vulnerability scan recommendations based on the findings but for
    this test/sample data, just make some hypothetical` `data up.)"`'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
- en: How it works…
  id: totrans-207
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: ChatGPT is based on a type of machine learning model known as a **transformer**,
    specifically a variant called **Generative Pretrained Transformer** (**GPT**).
    This model has been trained on a diverse range of internet text, has learned linguistic
    patterns and factual information, and has certain reasoning abilities from this
    vast corpus.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
- en: When presented with the task of creating a risk-scoring algorithm, ChatGPT doesn’t
    draw on an inherent understanding of cybersecurity or risk management. Rather,
    it leverages the patterns it has learned during its training phase. During training,
    it is likely that it has encountered text related to **risk-scoring algorithms**,
    **risk prioritization**, and cybersecurity. By recognizing the structure and context
    of such information in the training data, it can generate relevant and coherent
    responses when prompted.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
- en: When creating a risk scoring algorithm, ChatGPT first understands the various
    factors presented in the data, such as `Criticality Rating`, `Business Function`,
    `Attack Surface Size`, `Attack Surface Rating`, `Attack Vector Rating`, and `Mitigations
    and Remediations`. It understands that these factors are important in determining
    the overall risk associated with each asset. ChatGPT then formulates an algorithm
    that takes these factors into account, assigning different weights and scores
    to each, based on their perceived importance in the overall risk assessment.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
- en: The generated algorithm is then applied to the data to score each risk, creating
    a new table sorted by these scores. This sorting process helps in risk prioritization
    – risks with higher scores are considered more critical and are listed at the
    top of the table.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
- en: The impressive aspect of ChatGPT is that while it doesn’t truly *understand*
    cybersecurity or risk assessment in the human sense, it can mimic such understanding
    quite convincingly based on patterns it has learned. Its ability to generate creative
    and coherent text based on these patterns makes it a versatile tool for a wide
    range of tasks, including the generation of a risk-scoring algorithm in this recipe.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
- en: There’s more…
  id: totrans-213
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This method is limited by ChatGPT’s **token limit**. Due to this limit, only
    so much data can be pasted. However, later on in this book, we will provide recipes
    using more advanced techniques on how to get around this limitation.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
- en: Hint
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
- en: Different models have different token limits. If you’re an OpenAI Plus subscriber,
    you can choose between the GPT-3.5 and GPT-4 models. GPT-4 has twice the token
    limit size as GPT-3.5\. Additionally, if you use the OpenAI Playground instead
    of the ChatGPT UI, you can use the new gpt-3.5-turbo-16k model, which has four
    times the token limit of GPT-3.5.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
- en: Building Risk Assessment Reports
  id: totrans-217
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Cybersecurity involves managing and mitigating risks, and an essential part
    of this process is creating detailed risk assessment reports. These reports not
    only document the identified risks, vulnerabilities, and threats but also articulate
    the steps taken to address them, facilitating clear communication with various
    stakeholders. Automating the creation of risk assessment reports can save significant
    time and ensure consistency across reports.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
- en: In this recipe, we’ll create a Python script that uses OpenAI’s ChatGPT to automatically
    generate a cyber risk assessment report. We’ll be working with the data provided
    by the user, with a focus on the data we worked with in the *ChatGPT-assisted
    risk ranking and prioritization* recipe. However, the script and prompts have
    been designed to work with any relevant user-provided data. By the end of this
    recipe, you’ll be able to generate detailed and coherent risk assessment reports
    using Python, ChatGPT, and your own data.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  id: totrans-220
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Before you start, ensure that you have the following:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
- en: Python.
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The `openai` Python library installed. You can install it using pip: `pip`
    `install openai`.'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The `python-docx` library installed. You can install it using pip: `pip` `install
    python-docx`.'
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The `tqdm` library installed. You can install it using pip: `pip` `install
    tqdm`.'
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: An API key from OpenAI.
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to do it…
  id: totrans-227
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Before we start, remember that you need to provide system data in the `systemdata.txt`
    file. This data can be anything as long as they are separated or delineated and
    contain discernable values that represent the level of risk, severity, value,
    and so on of the systems and vulnerabilities. This information will be used by
    ChatGPT to create the appropriate algorithm and to generate contextually accurate
    report sections:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
- en: 'Import the required libraries:'
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE30]'
  id: totrans-230
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: These are the necessary libraries for the script to function correctly. `openai`
    is used to interact with the OpenAI API, `os` is used to access the environment
    variables, `Document` from `docx` is used to create a Word document, `threading`
    and `time` are used for multithreading and to keep track of elapsed time, `datetime`
    is used to generate a unique filename for each run, and `tqdm` is used to display
    a progress bar in the console.
  id: totrans-231
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Set up the OpenAI API key and generate the assessment name:'
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE31]'
  id: totrans-233
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: The OpenAI API key is read from an environment variable, and the current date
    and time are used to create a unique filename for the risk assessment report.
  id: totrans-234
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Create the risk assessment report outline:'
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE32]'
  id: totrans-236
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: This is the structure of the risk assessment report, which is used to guide
    the AI model in generating content for each section.
  id: totrans-237
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Define the function to generate section content:'
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE33]'
  id: totrans-239
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: This function constructs a conversation prompt, sends it to the OpenAI API,
    and retrieves the model’s response. It accepts the name of a section and system
    data as arguments and returns the generated content for the specified section.
  id: totrans-240
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Define the function to convert Markdown text to a Word document:'
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE34]'
  id: totrans-242
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE34]'
- en: This function accepts Markdown text and a file path, creates a Word document
    based on the Markdown content, and saves the document to the specified file path.
  id: totrans-243
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Define the function to display elapsed time:'
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE35]'
  id: totrans-245
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE35]'
- en: This function is used to display elapsed time in the console while waiting for
    the API call to complete. It’s implemented as a separate thread to allow the main
    thread to continue executing the rest of the script.
  id: totrans-246
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Read the system data and start the elapsed time thread:'
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE36]'
  id: totrans-248
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE36]'
- en: The script reads system data from a text file and starts a new thread to display
    the elapsed time in the console.
  id: totrans-249
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Generate the report using the OpenAI API:'
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE37]'
  id: totrans-251
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE37]'
- en: The script creates a progress bar, iterates over the sections in the risk assessment
    report outline, generates content for each section using the OpenAI API, and appends
    the content to the report. It then stops the elapsed time thread and closes the
    progress bar.
  id: totrans-252
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Save the report as a Word document:'
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE38]'
  id: totrans-254
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE38]'
- en: Finally, the script converts the generated report from Markdown to a Word document
    and saves the document. If an exception is thrown during this process, it’s caught
    and a message is printed to the console.
  id: totrans-255
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'The completed script should appear as follows:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE39]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: Now, let’s take a look at how it works.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
- en: How it works…
  id: totrans-259
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The key function of this script is to automate the generation of a detailed
    risk assessment report based on system data and the assessment process. The script
    works by dividing the process into a series of defined sections, and in each section,
    uses the OpenAI API to generate specific, detailed content.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
- en: The system data loaded from the file provides context for the gpt-3.5-turbo
    model to generate the content of each section. We define an outline that breaks
    down the risk assessment report into various sections that each represent a stage
    in the risk assessment process. These sections match the steps outlined in the
    *Creating a Risk Assessment* *Process* recipe.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
- en: 'We used the following prompt to build a report template prompt in our script:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE40]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: This approach guides the model to generate content that matches each section
    of the report.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
- en: In each section, the script calls the `generate_section_content()` function.
    This function sends a chat message to the OpenAI API that includes the role of
    the model as a seasoned cybersecurity professional, the task at hand (writing
    the specified section), and the provided system data. The model’s response, which
    is the content for the specified section, is returned by this function and added
    to the `report` list.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
- en: The `markdown_to_docx()` function converts the Markdown text in the `report`
    list into a Word document. It does this by iterating over each line in the Markdown
    text, checking whether it starts with a Markdown heading tag (such as `#`, `##`,
    etc.), and adding it to the document as a heading or paragraph accordingly.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
- en: Once all sections are generated and appended to the `report` list, the list
    is joined into a single string and converted into a Word document using the `markdown_to_docx()`
    function.
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
- en: There’s more…
  id: totrans-268
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The context for each section that describes certain aspects of the process is
    placeholder text that can and probably should be modified by the user. We’ve used
    this approach for simplicity, but in later recipes, we will demonstrate more advanced
    techniques on how to provide the actual risk assessment process as real context
    for the report.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
- en: We encourage you to experiment with different assessment process outlines and
    datasets. Understanding how to tweak the prompts and data to get the most effective
    results that suit your needs is a crucial part of leveraging AI models such as
    gpt-3.5-turbo and gpt-4.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
- en: Important note
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
- en: Do remember that, similar to the previous recipe, this method is limited by
    the chosen model’s token limit. The gpt-3.5-turbo model has a token limit of 4,096,
    which constrains how much data can be passed in from the system data file. However,
    we will be exploring advanced techniques later in this book to get around this
    limitation. With these techniques, you’ll be able to handle larger datasets and
    generate more comprehensive reports.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
- en: Hint
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
- en: As with most recipes in this book, the gpt-3.5-turbo model was used for the
    recipes in this chapter, so that the baseline is set with the most cost-effective
    model. The GPT-3.5 ChatGPT model was also used so the baseline is set with the
    most efficient model without limitations. However, you are encouraged to experiment
    with the use of different models such as gpt-3.5-turbo, gpt-4, and the newly released
    gpt-3.5-turbo-16k to find the results that best suit your needs.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
